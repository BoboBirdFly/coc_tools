import type { SkillDefinition } from '@schema/character'

// 参考 docs/coc7th调查员手册.md 的技能基础值
// base: 角色卡上显示的初始值，大部分技能直接使用base值，特殊技能（闪避、母语、信用评级）需要根据属性计算
export const SKILLS: SkillDefinition[] = [
  {
    id: 'accounting',
    name: '会计',
    category: '学识',
    base: 5,
    description: '处理账目、辨识资金流动',
  },
  {
    id: 'anthropology',
    name: '人类学',
    category: '学识',
    base: 1,
    description: '研究部落文化、语言与风俗',
  },
  {
    id: 'appraise',
    name: '估价',
    category: '社交',
    base: 5,
    description: '鉴定物品真伪与价值',
  },
  {
    id: 'credit-rating',
    name: '信用评级',
    category: '社交',
    base: 0,
    description: '社会地位与资源调动能力',
  },
  {
    id: 'history',
    name: '历史',
    category: '学识',
    base: 5,
    description: '辨识历史事件与背景',
  },
  {
    id: 'library-use',
    name: '图书馆使用',
    category: '调查',
    base: 20,
    description: '高效检索资料、档案',
  },
  {
    id: 'psychology',
    name: '心理学',
    category: '社交',
    base: 10,
    description: '通过观察人类的共性来分析另一人的动机与性格，或是识别某人是否正在说谎。守秘人可以选择代替玩家进行隐蔽的心理学技能检定，并仅仅告知玩家信息，无论这些信息是真还是假。',
  },
  {
    id: 'spot-hidden',
    name: '侦查',
    category: '调查',
    base: 25,
    description: '发现密门或隔间，注意到隐蔽的闯入者，发现不明显的线索，辨认被重新上过漆的汽车，意识到伏击者，注意到鼓起的钱包，等等——对于调查员来说这是一项十分重要的技能。当调查员搜寻某个躲藏起来的角色的时候，其对手的潜行技能需要被用来决定这次检定的难度。',
  },
  {
    id: 'stealth',
    name: '潜行',
    category: '生存',
    base: 20,
    description: '用于避开视线、悄声行进或在不惊动其他可能听或看见的人的情况下隐藏起来。',
  },
  {
    id: 'sleight-of-hand',
    name: '巧手',
    category: '技艺',
    base: 10,
    description: '允许使用者从视觉角度遮盖或掩藏某件或某些物体，或许是将其藏匿在残骸、衣物或其他易让人分神的物件中。这项技能同样还用于对物体的灵敏而精巧的操作。',
  },
  {
    id: 'persuade',
    name: '说服',
    category: '社交',
    base: 10,
    description: '通过合理的争论、论辩与讨论使某人相信某一想法、概念或信念。说服的实行并不一定要牵扯到事实真相。成功的说服需要花费时间：至少半个小时。如果你想要快速地说服某人，你应当使用话术技能。这项技能可被说服或心理学技能对抗。',
  },
  {
    id: 'art-craft-shorthand',
    name: '技艺：速记',
    category: '技艺',
    base: 5,
    description: '快速记录访谈或会议内容',
  },
  {
    id: 'occult',
    name: '神秘学',
    category: '学识',
    base: 5,
    description: '了解各种超自然传说',
  },
  {
    id: 'cthulhu-mythos',
    name: '克苏鲁神话',
    category: '学识',
    base: 0,
    description: '有关 Mythos 的禁忌知识',
  },
  {
    id: 'medicine',
    name: '医学',
    category: '医疗',
    base: 1,
    description: '系统性诊疗与手术能力',
  },
  {
    id: 'first-aid',
    name: '急救',
    category: '医疗',
    base: 30,
    description: '止血、包扎，稳定伤势',
  },
  {
    id: 'handgun',
    name: '射击（手枪）',
    category: '战斗',
    base: 20,
    description: '短管火器操作与战斗反应',
  },
  {
    id: 'language-native',
    name: '母语',
    category: '学识',
    base: 0,
    description: '等同 EDU，代表受教育语言的掌握',
  },
  // 从 coc7th技能概述.md 补充的技能
  // 注意：根据标准技能表，驾驶技能分为"汽车驾驶"和通用"驾驶"（船只、飞行器等）
  // 这里保留通用"驾驶"用于非汽车载具，汽车驾驶单独列出
  {
    id: 'drive',
    name: '驾驶',
    category: '生存',
    base: 20,
    description: '选取一项专业，例如船只、飞行器或飞艇，每一项专业都需要单独支付技能点。这项技能允许对这些载具安全地进行操作，并将它们用作交通工具。注意：汽车驾驶请使用"汽车驾驶"技能。',
  },
  {
    id: 'psychoanalysis',
    name: '精神分析',
    category: '医疗',
    base: 1,
    description: '包括一系列情绪疗法。精神分析可以帮助调查员恢复理智：游戏中每月一次，为确定治疗效果，心理咨询师或医生可进行一次精神分析检定。如果检定成功，病人可恢复 1D3 点理智值；如果失败，则无法恢复理智值；如果大失败，则病人会失去 1D6 点理智值，并且当前的心理咨询师进行的治疗会就此终止。在游戏中，仅使用精神分析并不能加速从不定性疯狂中恢复的过程，那需要 1D6 个月系统（或类似条件）的看护，但精神分析可能会作为其中的一部分出现。成功地使用这项技能可以使目标在短期内克服恐惧症或躁狂症，或是看穿幻觉。',
  },
  {
    id: 'ride',
    name: '骑术',
    category: '生存',
    base: 20,
    description: '用于骑乘马、驴和骡子，并给予其使用者基础的护理坐骑、骑乘用具与如何使坐骑疾驰或越过困难地形的知识。如果坐骑突然意外地抬起了身子或被绊到，那么骑手保持继续骑行的几率等同于其骑术技能值。',
  },
  {
    id: 'science',
    name: '科学',
    category: '学识',
    base: 1,
    description: '针对某一科学专业的理论与实践能力，这项技能通常都是通过正式的教育与训练获得的，但也可能为学识渊博的业余科学家所拥有。对科学的理解与其范围被游戏中的时代所限制。技能点可被分配给任意该技能下的专业，例如：天文学，生物学，植物学，化学，密码学，地质学，药学，物理学，动物学，等等。如果某一角色并没有明显与当前状况对应的专业科学技能，他可以依照守秘人的判断，以一项与之相关联的专业进行检定，但难度等级将会上升（或需要承受一枚惩罚骰）。',
  },
  {
    id: 'survival',
    name: '生存',
    category: '生存',
    base: 10,
    description: '在沙漠、极地、海洋或荒野等极端环境下生存所需的专业技能。其中包括了狩猎、建造避难所、识别环境危害（例如避开有毒植物）等等。技能点可被分配给任意该技能下的专业，并从荒野、极地、沙漠、海洋等环境中选取对应的类型。如果某一角色没有明显与当前状况对应的专业生存技能，他可以依照守秘人的判断，以一项与之相关联的专业进行检定，但难度等级将会上升（或需要承受一枚惩罚骰）。',
  },
  {
    id: 'swim',
    name: '游泳',
    category: '生存',
    base: 20,
    description: '用于在水或其他液体中浮起并进行的技能。只有当在危机或险境中游泳的时候才需要进行检定。在游泳的孤注一掷中失败可能会引致损失耐久值。这也可能导致这名角色被冲向下游、部分或完全地窒息。',
  },
  {
    id: 'throw',
    name: '投掷',
    category: '战斗',
    base: 20,
    description: '使用一个物体击中目标。一件手掌大小的物体最多可被掷出相当于力量值五分之一码那么远。如果投掷技能失败，该物体可能落在离目标随机距离处，这由守秘人决定。在战斗中，当投掷石块、长矛、手雷或回力镖时应使用这项技能。',
  },
  {
    id: 'track',
    name: '追踪',
    category: '调查',
    base: 10,
    description: '通过地面或植物上的痕迹跟踪某一人物、载具或动物。诸如痕迹被留下后经过的时间、雨水与地面的类型等因素可能会影响到检定的难度等级。',
  },
  // 从技能表补充的其他技能
  {
    id: 'archaeology',
    name: '考古学',
    category: '学识',
    base: 1,
    description: '研究古代文明、遗迹和文物，理解历史背景和文化意义',
  },
  {
    id: 'art-craft',
    name: '艺术/手艺',
    category: '技艺',
    base: 5,
    description: '艺术创作或手工艺制作能力。技能点可被分配给任意该技能下的专业，例如：绘画、雕塑、摄影、木工、制陶等',
  },
  {
    id: 'charm',
    name: '取悦',
    category: '社交',
    base: 15,
    description: '通过个人魅力和吸引力影响他人，使他人对你产生好感',
  },
  {
    id: 'climb',
    name: '攀爬',
    category: '生存',
    base: 20,
    description: '攀爬墙壁、树木、悬崖等垂直或倾斜表面的能力',
  },
  {
    id: 'disguise',
    name: '乔装',
    category: '技艺',
    base: 5,
    description: '通过化妆、服装和举止改变外貌，伪装成他人或不同身份',
  },
  {
    id: 'dodge',
    name: '闪避',
    category: '战斗',
    base: 0, // 基础值为 DEX/2，这里设为0表示需要根据DEX计算
    description: '躲避攻击的能力。基础值等于敏捷（DEX）的一半',
  },
  {
    id: 'drive-auto',
    name: '汽车驾驶',
    category: '生存',
    base: 20,
    description: '驾驶汽车、卡车等陆地载具的能力',
  },
  {
    id: 'electrical-repair',
    name: '电气维修',
    category: '技艺',
    base: 10,
    description: '修理和维护电气设备、电路和电子设备的能力',
  },
  {
    id: 'fast-talk',
    name: '话术',
    category: '社交',
    base: 5,
    description: '通过快速、巧妙的言辞快速说服他人，通常用于紧急情况或快速交涉',
  },
  {
    id: 'fight',
    name: '格斗',
    category: '战斗',
    base: 25,
    description: '近战格斗能力，包括拳击、踢击、擒拿等徒手或使用近战武器的战斗技巧',
  },
  {
    id: 'rifle-shotgun',
    name: '射击（步枪/散弹枪）',
    category: '战斗',
    base: 25,
    description: '使用步枪、散弹枪等长管火器的能力',
  },
  {
    id: 'intimidate',
    name: '恐吓',
    category: '社交',
    base: 15,
    description: '通过威胁、暴力暗示或威压使他人屈服或配合',
  },
  {
    id: 'jump',
    name: '跳跃',
    category: '生存',
    base: 20,
    description: '跳跃、跨越障碍物的能力',
  },
  {
    id: 'language',
    name: '语言',
    category: '学识',
    base: 1,
    description: '掌握除母语外的其他语言。技能点可被分配给任意该技能下的专业语言',
  },
  {
    id: 'law',
    name: '法律',
    category: '学识',
    base: 5,
    description: '了解法律条文、法律程序和司法体系',
  },
  {
    id: 'listen',
    name: '聆听',
    category: '调查',
    base: 20,
    description: '通过听觉感知周围环境，注意到细微的声音、对话或异常声响',
  },
  {
    id: 'locksmith',
    name: '锁匠',
    category: '技艺',
    base: 1,
    description: '开锁、破解锁具和保险箱的能力',
  },
  {
    id: 'mechanical-repair',
    name: '机械维修',
    category: '技艺',
    base: 10,
    description: '修理和维护机械设备、引擎和机械装置的能力',
  },
  {
    id: 'natural-world',
    name: '博物学',
    category: '学识',
    base: 10,
    description: '了解自然世界，包括动植物、地理、天气等自然现象',
  },
  {
    id: 'navigate',
    name: '导航',
    category: '调查',
    base: 10,
    description: '使用地图、指南针或自然标志进行导航和定位的能力',
  },
  {
    id: 'operate-heavy-machine',
    name: '操作重机',
    category: '技艺',
    base: 1,
    description: '操作重型机械、工程设备或大型载具的能力',
  },
]

export const SKILL_MAP = SKILLS.reduce<Record<string, SkillDefinition>>((acc, skill) => {
  acc[skill.id] = skill
  return acc
}, {})

export const getSkillById = (id: string) => SKILL_MAP[id]

